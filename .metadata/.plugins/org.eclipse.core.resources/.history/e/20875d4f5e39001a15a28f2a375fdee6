package siti.inf203.jena.javafx;

import java.io.IOException;
import java.util.List;

import org.apache.lucene.queryParser.ParseException;

import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Hyperlink;
import javafx.scene.control.Label;
import javafx.scene.control.ListView;
import javafx.scene.control.TextField;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import siti.inf203.jena.app.SearchConsole;
import siti.inf203.jena.index.TextFileIndexer;

public class Main extends Application {
	final static List<String> linkList = TextFileIndexer.getDocPathList();
	final Hyperlink[] hpls = new Hyperlink[linkList.size()];
	Stage window;
	Scene scene;
	Button button;
	ListView<String> listView;
	public static void main(String[] args) {
		launch(args);
	}
	
	@Override
	public void start(Stage primaryStage) throws Exception {
		// TODO Auto-generated method stub
		window = primaryStage;
		window.setTitle("Seach Engine");
		button = new Button("Rechercher");
		Label labelSearch = new Label("Entrer votre requÃªte");
		
		TextField text = new TextField();
		button.setOnAction(e -> {
			try {
				SearchConsole.searchKey(text.getText());
			} catch (IOException e1) {
				// TODO Auto-generated catch block
				e1.printStackTrace();
			} catch (ParseException e1) {
				// TODO Auto-generated catch block
				e1.printStackTrace();
			}
			
			for (int i = 0; i < hpls.length; i++) {
				final Hyperlink hpl = hpls[i] = new Hyperlink(linkList.get(i));
			}

			layout.getChildren().addAll(hpls);
		});
		TextFileIndexer.getDocPathList().clear();
//		listView = new ListView<>();
//		listView.getItems().addAll(TextFileIndexer.getDocPathList());
		

		
		VBox layout = new VBox(10);
		layout.setPadding(new Insets(20,20,20,20));
		layout.getChildren().add(labelSearch);
		layout.getChildren().add(text);
		layout.getChildren().add(button);
		layout.setSpacing(5);
		
		scene = new Scene(layout, 600, 500);
		window.setScene(scene);
		window.show();
	}
	
	
}
